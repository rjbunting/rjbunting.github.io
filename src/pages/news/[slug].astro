---
import type { CollectionEntry } from 'astro:content';
import { getCollection } from 'astro:content';
import PostLayout from '../../layouts/PostLayout.astro';

export async function getStaticPaths() {
  const newsEntries = await getCollection('news');
  return newsEntries.map((entry) => ({ params: { slug: entry.slug }, props: { entry } }));
}

interface Props {
  entry: CollectionEntry<'news'>;
}

const { entry } = Astro.props as any;
const newsPost = entry.data;
const { Content } = await entry.render();
---

<PostLayout
  title={newsPost.title}
  description={newsPost.description}
  pubDate={newsPost.pubDate}
  heroImage={newsPost.heroImage}
  badge={newsPost.badge}
>
  <Content />
</PostLayout>
